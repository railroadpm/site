const FAKE_LOGIN=!1,rrpmAuth=window.netlifyIdentity;if(rrpmAuth){console.log(">>> Netlify Identity: Available");try{FAKE_LOGIN?loginFakeUser():(rrpmAuth.on("error",e=>console.error(">>> Netlify Identity",e)),rrpmAuth.on("init",initRBAC))}catch(e){console.log(">>> Netlify Identity: Initialization Error",e)}}function loginFakeUser(){let e;initRBAC({app_metadata:{roles:["Administrator"]}})}function initRBAC(e){console.log(`>>> Netlify Identity: In${FAKE_LOGIN?" (Fake)":""} Init Event Handler`);try{if(e){let t=document.getElementById("nc-root");if(e.app_metadata&&e.app_metadata.roles&&t){const n=e.app_metadata.roles;n.includes("Administrator")?(t.classList.add("nc-user-role-is-admin"),t.classList.add("nc-user-role-is-aor"),window.ncDefaultCollectionName="reports_bnsf",document.location.href="/#/collections/reports_bnsf"):(t.classList.add("nc-user-role-is-participant"),window.ncDisableInputsByName="CarsOnLine",n.includes("BNSF")?initRBACForRole(t,"BNSF"):n.includes("CN")?initRBACForRole(t,"CN"):n.includes("KCS")?initRBACForRole(t,"KCS"):n.includes("NS")?initRBACForRole(t,"NS"):n.includes("UP")?initRBACForRole(t,"UP"):(window.ncDefaultCollectionName="reports_bnsf",document.location.href="/#/collections/reports_bnsf",setTimeout(()=>{let e=document.getElementsByClassName("nc-app-sidebar-heading")[0];e&&(e.innerText="You don't have access to any Reports. Please contact AAR to request access.",e.setAttribute("style","font-size: 15px; color: red;"),e.parentElement.setAttribute("style","width: 320px;"))},2e3)))}}else rrpmAuth.on("login",()=>{console.log(">>> Netlify Identity: In Login Event Handler"),document.location.href="/"})}catch(e){console.log(">>> CMS RBAC Initialization Error",e)}}function initRBACForRole(e,t){const n=t.toLowerCase();e.classList.add(`nc-user-role-is-${n}`),window.ncDefaultCollectionName=`reports_${n}`,document.location.href=`/#/collections/reports_${n}`}